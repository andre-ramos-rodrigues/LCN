generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id       Int       @id @default(autoincrement())
  email    String    @unique
  name     String?
  role     UserRole  @default(Visitor)
  password String    @default("123456")
  comments Comment[]
  messages Message[]
  posts    Post[]
}

model Post {
  id        String    @id @default(cuid())
  title     String
  author    String
  date      DateTime  @default(now())
  excerpt   String
  content   String
  imageUrls String[]
  userId    Int?
  carrousel Boolean   @default(false)
  comments  Comment[]
  user      User?     @relation(fields: [userId], references: [id])
}

model Comment {
  id         String   @id @default(cuid())
  author     String
  content    String
  timestamp  DateTime @default(now())
  isApproved Boolean  @default(false)
  postId     String
  userId     Int?
  post       Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  user       User?    @relation(fields: [userId], references: [id])
}

model Message {
  id        String   @id @default(cuid())
  name      String
  email     String
  message   String
  timestamp DateTime @default(now())
  userId    Int?
  user      User?    @relation(fields: [userId], references: [id])
}

model Theme {
  id                 Int    @id @default(autoincrement())
  primaryColor       String
  secondaryColor     String
  accentColor        String
  base100Color       String
  textPrimaryColor   String
  textSecondaryColor String
  headerText         String
  footerText         String
}

enum UserRole {
  Admin
  Visitor
}

model SocialLink {
  id        Int      @id @default(autoincrement())
  title     String
  link      String
  logo      String   // icon name OR image URL
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}